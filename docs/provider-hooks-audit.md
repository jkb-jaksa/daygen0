# Provider hook audit

The table below captures the current public API and implementation gaps for each generation provider hook in `src/hooks/`. Signatures are taken from the exported interfaces in each file and note where behavior is still stubbed.

| Hook | Exported options | Exported state | Returned helpers | Observed issues / stubs |
| --- | --- | --- | --- | --- |
| `useFluxImageGeneration` | `FluxImageGenerationOptions` (`prompt`, `model`, optional width/height/aspect refs, references, avatar/product ids) | `FluxImageGenerationState` (`isLoading`, `error`, `generatedImage`, `jobStatus`, `progress`) | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing `apiFetch` import; manual polling loop without abort/timeout; no integration with `GenerationContext`; webhook flag logs a warning only. |
| `useGeminiImageGeneration` | `ImageGenerationOptions` (prompt, optional model/image data/references, temperature/outputLength/topP/aspect ratio, avatar/product/style ids, callbacks) | `ImageGenerationState` (`isLoading`, `error`, `generatedImage`, `progress`, `status`, `jobId`) | `generateImage`, `setError`, `reset`, credit modal helpers | Complex progress controller but still polls manually; doesnâ€™t register jobs in `GenerationContext`; fallback logic duplicates payload building. |
| `useLumaImageGeneration` | `LumaImageGenerationOptions` (`prompt`, `model`, aspect ratio + reference fields, format, callback URL, avatarId`) | Internal state with `generationId`, `status`, `contentType` | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing `apiFetch` import; polling loop ignores abort/timeouts; returns raw payload fields; no active job bookkeeping. |
| `useRunwayImageGeneration` | `ImageGenerationOptions` (`prompt`, `model`, `uiModel`, references, ratio, seed, avatar/product/style ids`) | `ImageGenerationState` | `generateImage`, `clearError`, `clearImage` plus credit modal helpers | Missing imports for `apiFetch`, `getApiUrl`, `resolveGenerationCatchError`; manual polling; credit check gating but no job tracking. |
| `useChatGPTImageGeneration` | `ChatGPTImageGenerationOptions` (`prompt`, `n`, `size`, `quality`, `background`, avatar/product/style ids`) | `ChatGPTImageGenerationState` | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing imports; manual polling; fallback to inline `dataUrl` but not standardized; no context integration. |
| `useIdeogramImageGeneration` | `IdeogramImageGenerationOptions` (`prompt`, `model`, `style`, `negativePrompt`, `ratio`, `avatarId`, `references`) | `IdeogramImageGenerationState` (mirrors others, includes `jobStatus`, `progress`) | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing imports; manual polling with provider-specific metadata parsing; no shared helper usage or context registration. |
| `useReveImageGeneration` | `ReveImageGenerationOptions` (`prompt`, `style`, `ratio`, `references`, avatar/product/style ids) | `ReveImageGenerationState` | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing imports; manual polling; metadata parsing duplicated; no context integration. |
| `useQwenImageGeneration` | `QwenImageGenerationOptions` (`prompt`, `model`, `size`, `negativePrompt`, `watermark`, `avatarId`, etc.) | `QwenImageGenerationState` (`isLoading`, `error`, `generatedImage`, `jobStatus`, `progress`) | `generateImage`, `clearError`, `clearGeneratedImage`, `reset` | Missing imports; manual polling; provider options assembled ad hoc; job queue/context not updated. |
| `useLumaVideoGeneration` | `LumaVideoGenerationOptions` (`prompt`, `style`, `referenceImages`, `callbackUrl`, etc.) | `LumaVideoGenerationState` (tracks `jobId`, `status`, `progress`) | `generateVideo`, `clearError`, `reset` | Missing imports; polling logic duplicates image variant; no shared helper or abort handling; no GenerationContext usage. |
| `useRunwayVideoGeneration` | `RunwayVideoGenerationOptions` (`prompt`, `duration`, `aspectRatio`, `motion`, etc.) | `RunwayVideoGenerationState` (`isGenerating`, `error`, `jobId`, `status`, `resultUrl`) | `generateVideo`, `clearError`, `reset` | Missing imports; manual polling; status handling inconsistent; no active job tracking. |
| `useHailuoVideoGeneration` | `HailuoVideoGenerationOptions` (`prompt`, `model`, `ratio`, `references`) | `HailuoVideoGenerationState` | `generateVideo`, `clearError`, `reset` | Missing imports; polls without abort/timeout; metadata parsing repeated; context not informed. |
| `useKlingVideoGeneration` | `KlingVideoGenerationOptions` (`prompt`, `style`, `aspectRatio`, `guidanceScale`, references) | `KlingVideoGenerationState` | `generateVideo`, `clearError`, `reset` | Missing imports; manual polling; does not normalize provider responses or register jobs. |
| `useSeedanceVideoGeneration` | `SeedanceVideoGenerationOptions` (`prompt`, `ratio`, `style`, `references`) | `SeedanceVideoGenerationState` | `generateVideo`, `clearError`, `reset` | Missing imports; manual polling; hard-coded retry loop; ignores abort; no GenerationContext integration. |
| `useVeoVideoGeneration` | `VeoVideoGenerationOptions` (`prompt`, `model`, `aspectRatio`, `duration`, references) | `VeoVideoGenerationState` | `generateVideo`, `clearError`, `reset` | Missing imports; manual polling; metadata parsing repeated; context unaware. |
| `useWanVideoGeneration` | `WanVideoGenerationOptions` (`prompt`, `size`, `seed`, `negativePrompt`, `watermark`, references) | `WanVideoGenerationState` | `generateVideo`, `clearError`, `reset` | Missing imports; manual polling; provider options assembled manually; no shared helper or context usage. |

These gaps guide the helper abstraction and standardization introduced in this phase.
